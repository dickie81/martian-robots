(this["webpackJsonpmars-rover-lme"]=this["webpackJsonpmars-rover-lme"]||[]).push([[0],{24:function(n,t,r){},28:function(n,t,r){"use strict";r.r(t);var e=r(1),o=r(0),i=r.n(o),c=r(14),a=r.n(c),u=(r(24),r(11)),s=r.n(u),d=r(15),l=r(5),b=r(2),f=r(9),j=r(3),v=r(4);function p(){var n=Object(j.a)(["\n  text-align: center;\n\n  &.E {\n    transform: rotate(90deg);\n  }\n\n  &.W {\n    transform: rotate(-90deg);\n  }\n\n  &.S {\n    transform: rotate(180deg);\n  }\n"]);return p=function(){return n},n}function x(){var n=Object(j.a)(["\n  width: 20px;\n  height: 20px;\n  border: 2px solid black;\n  margin: 2px;\n  overflow: hidden;\n\n  &.scent-N {\n    border-top-color: red;\n  }\n  &.scent-E {\n    border-right-color: red;\n  }\n  &.scent-S {\n    border-bottom-color: red;\n  }\n  &.scent-W {\n    border-left-color: red;\n  }\n"]);return x=function(){return n},n}function O(){var n=Object(j.a)(["\n  display: flex;\n  flex-direction: row;\n"]);return O=function(){return n},n}function h(){var n=Object(j.a)(["\n  display: inline-block;\n"]);return h=function(){return n},n}var g=v.a.div(h()),m=v.a.div(O()),w=v.a.div(x()),y=v.a.div(p()),k=function(n){var t=n.data,r=n.robotPosition;return Object(e.jsx)(g,{children:Object(l.a)(t).reverse().map((function(n,t){return Object(e.jsx)(m,{children:n.map((function(n){var t=n.x,o=n.y,i=n.scents;return Object(e.jsx)(w,{"data-x":t,"data-y":o,className:i.map((function(n){return"scent-".concat(n)})).join(" "),children:(null===r||void 0===r?void 0:r.x)===t&&(null===r||void 0===r?void 0:r.y)===o?Object(e.jsx)(y,{className:r.direction,children:"\u2b06"}):null},"cell".concat(t,"x").concat(o))}))},"row".concat(t))}))})},N=["N","E","S","W"],S={N:{x:0,y:1},E:{x:1,y:0},S:{x:0,y:-1},W:{x:-1,y:0}},E=function(n,t){var r=(N.indexOf(n)+N.length+("L"===t?-1:1))%N.length;return N[r]},R=function(n,t){var r=S[t];return[n[0]+=r.x,n[1]+=r.y]},I=function(n){if(!n)throw new Error("Empty instructions");var t={},r=n.split("\n").map((function(n){return n.trim()})).filter((function(n){return!!n}));if(r.length<3||r.length%2!==1)throw new Error("Invalid instructions");if(t.gridDimensions=r[0].split(" ").map((function(n){return Number(n)})),2!==t.gridDimensions.length||t.gridDimensions.some((function(n){return isNaN(n)})))throw new Error("Invalid grid dimensions");return t.robots=r.slice(1).reduce((function(n,r,e){var o=Math.floor(e/2);if(n[o]){var i=r.split("");if(i.some((function(n){return!["L","R","F"].includes(n)})))throw new Error("Invalid instructions for robot ".concat(e));n[o]=Object(b.a)(Object(b.a)({},n[o]),{},{instructions:i})}else{var c=r.split(" "),a=[Number(c[0]),Number(c[1])],u=c[2];if(3!==c.length||a.some((function(n){return isNaN(n)}))||!function(n){return N.includes(n)}(u))throw new Error("Invalid start position for robot ".concat(e));if(a[0]<0||a[0]>t.gridDimensions[0]||a[1]<0||a[1]>t.gridDimensions[1])throw new Error("Start position for robot ".concat(e," is outside of the grid"));n[o]={coords:a,direction:u}}return n}),[]),t};function L(){var n=Object(j.a)(["\n  padding: 0;\n  border: 1px solid black;\n  appearance: none;\n"]);return L=function(){return n},n}function D(){var n=Object(j.a)(["\n  width: 300px;\n  height: 300px;\n  border: 1px solid black;\n  appearance: none;\n  box-sizing: border-box;\n"]);return D=function(){return n},n}function C(){var n=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 300px;\n"]);return C=function(){return n},n}var F=v.a.div(C()),T=v.a.textarea(D()),P=v.a.button(L()),W=function(n){var t=n.onSubmit,r=Object(o.useState)(""),i=Object(f.a)(r,2),c=i[0],a=i[1];return Object(e.jsxs)(F,{children:[Object(e.jsx)(T,{onChange:function(n){a((function(){return n.target.value}))},"data-testid":"instructions"}),Object(e.jsx)(P,{onClick:function(){try{var n=I(c);t(n)}catch(r){alert(r.message)}},children:"SEND INSTRUCTIONS"})]})};function A(){var n=Object(j.a)(["\n  width: 300px;\n  height: 300px;\n  border: 1px solid black;\n  appearance: none;\n  box-sizing: border-box;\n"]);return A=function(){return n},n}function z(){var n=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 300px;\n"]);return z=function(){return n},n}var B=v.a.div(z()),J=v.a.textarea(A()),M=function(n){var t=n.output;return Object(e.jsx)(B,{children:Object(e.jsx)(J,{readOnly:!0,value:t,"data-testid":"output"})})},U=function(n){return new Promise((function(t){setTimeout(t,n)}))},q=function(n,t,r){return[].concat(Object(l.a)(n.slice(0,t)),[r],Object(l.a)(n.slice(t+1)))},G=function(n,t){return Array.from({length:t}).map((function(t,r){return Array.from({length:n}).map((function(n,t){return{x:t,y:r,scents:[]}}))}))},H=function(n,t,r){var e=n[t[1]],o=e[t[0]],i=q(e,t[0],Object(b.a)(Object(b.a)({},o),{},{scents:[].concat(Object(l.a)(o.scents),[r])}));return q(n,t[1],i)},K=function(n){var t=n.rawInstructions,r=n.timeout,i=void 0===r?100:r,c=Object(o.useState)({instructions:null,robotList:[],activeRobot:null,output:"",grid:null,state:"idle"}),a=Object(f.a)(c,2),u=a[0],j=a[1];return Object(o.useEffect)((function(){var n=u.activeRobot,t=u.robotList,r=u.grid;n||t.length?function(){var e=Object(d.a)(s.a.mark((function e(){var o,c,a,d,f;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U(i);case 2:if(null===n||void 0===n?void 0:n.instructions.length){e.next=8;break}if(!t.length){e.next=6;break}return j(Object(b.a)(Object(b.a)({},u),{},{activeRobot:t[0],robotList:t.slice(1),state:"processing"})),e.abrupt("return");case 6:return j(Object(b.a)(Object(b.a)({},u),{},{activeRobot:null})),e.abrupt("return");case 8:if(o=n.instructions[0],c=n.instructions.slice(1),a=n.direction,d=Object(l.a)(n.coords),!["L","R"].includes(o)){e.next=16;break}a=E(n.direction,o),e.next=26;break;case 16:if("F"!==o){e.next=26;break}if(d=R(d,n.direction),!r[n.coords[1]][n.coords[0]].scents.includes(n.direction)){e.next=23;break}d=n.coords,e.next=26;break;case 23:if(null===(f=r[d[1]])||void 0===f?void 0:f[d[0]]){e.next=26;break}return j(Object(b.a)(Object(b.a)({},u),{},{output:"".concat(u.output).concat(n.coords.join(" ")," ").concat(n.direction," LOST\n"),grid:H(r,n.coords,n.direction),activeRobot:null})),e.abrupt("return");case 26:j(Object(b.a)(Object(b.a)({},u),{},{activeRobot:{direction:a,instructions:c,coords:d},output:0===c.length?"".concat(u.output).concat(d.join(" ")," ").concat(a,"\n"):u.output}));case 27:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()():"idle"!==u.state&&j(Object(b.a)(Object(b.a)({},u),{},{state:"idle"}))}),[u,i]),Object(e.jsxs)("div",{className:"App",children:[Object(e.jsx)(W,{onSubmit:function(n){j(Object(b.a)(Object(b.a)({},u),{},{output:"",instructions:n,grid:G.apply(void 0,Object(l.a)(n.gridDimensions.map((function(n){return n+1})))),robotList:(null===n||void 0===n?void 0:n.robots)?n.robots:[],activeRobot:null}))},rawInstructions:t}),u.instructions&&Object(e.jsx)(k,{data:u.grid,robotPosition:u.activeRobot?{x:u.activeRobot.coords[0],y:u.activeRobot.coords[1],direction:u.activeRobot.direction}:null}),Object(e.jsx)("p",{role:"log",children:u.state}),Object(e.jsx)(M,{output:u.output})]})},Q=function(n){n&&n instanceof Function&&r.e(3).then(r.bind(null,29)).then((function(t){var r=t.getCLS,e=t.getFID,o=t.getFCP,i=t.getLCP,c=t.getTTFB;r(n),e(n),o(n),i(n),c(n)}))};a.a.render(Object(e.jsx)(i.a.StrictMode,{children:Object(e.jsx)(K,{})}),document.getElementById("root")),Q()}},[[28,1,2]]]);
//# sourceMappingURL=main.752fc60d.chunk.js.map